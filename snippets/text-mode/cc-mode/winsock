# -*- mode: snippet -*-
# name : initialize/cleanup win32 socket
# key : winsock
# --
#if defined(_WIN32) || defined(_WIN64)
WSADATA wsaData;
int ${1:err} = WSAStartup(WINSOCK_VERSION, &wsaData);
if (0 != $1) {
    fprintf(stderr, "WSAStartup failure!\n");
    ${2:return 1;}
}
#endif

$0

#if defined(_WIN32) || defined(_WIN64)
WSACleanup();
#endif